[gd_scene load_steps=19 format=3 uid="uid://cqogid51gx2q8"]

[ext_resource type="PackedScene" uid="uid://b54ks2lks65pw" path="res://Scenes/Map/Map.tscn" id="1_wyxvx"]
[ext_resource type="PackedScene" uid="uid://bxdhdw8570td6" path="res://Scenes/Enemies/Enemy.tscn" id="2_0j08j"]
[ext_resource type="Script" uid="uid://bvtxvt18atr23" path="res://Load/WaveDirector.cs" id="2_38uoo"]
[ext_resource type="Script" uid="uid://6ls4nxdmluu3" path="res://Scenes/Map/PathVisualizer.cs" id="4_ixfg1"]
[ext_resource type="PackedScene" uid="uid://ci33ppfhyllf" path="res://Scenes/Towers/Tower.tscn" id="4_jbeyo"]
[ext_resource type="PackedScene" uid="uid://beq0wrl3nh46k" path="res://Scenes/Towers/Projectile.tscn" id="5_ixfg1"]
[ext_resource type="PackedScene" uid="uid://sgt7rxkujxr1" path="res://Scenes/Towers/TowerSlots.tscn" id="7_atavw"]
[ext_resource type="Script" uid="uid://bmmrhik3j107k" path="res://Scenes/GameManager.cs" id="7_xu74l"]
[ext_resource type="PackedScene" uid="uid://ckc33onu063q5" path="res://Scenes/Towers/AspectBar.tscn" id="9_kl2rs"]
[ext_resource type="Script" uid="uid://cxpekmp87pqns" path="res://Scenes/PlayerManager.cs" id="9_x3f4s"]
[ext_resource type="Script" uid="uid://bjlwqjh832hth" path="res://Scripts/Aspects/AspectLibrary.cs" id="10_j6cy0"]
[ext_resource type="Resource" uid="uid://dhymdjlukdrx7" path="res://Resources/AspectTemplates/DamageMult.tres" id="11_7jyn4"]
[ext_resource type="Script" uid="uid://dk5vs25jqqb6v" path="res://Scenes/HealthUi.cs" id="11_x3f4s"]
[ext_resource type="Resource" uid="uid://bwxyqoqb1pffm" path="res://Resources/AspectTemplates/MachineGun.tres" id="12_5bwvv"]
[ext_resource type="Resource" uid="uid://b6wahnncr2f5s" path="res://Resources/AspectTemplates/FireRateAdd.tres" id="12_81a2t"]
[ext_resource type="Script" uid="uid://b8xdx78t4cuh8" path="res://Scripts/Gameplay/Towers/TowerSlot.cs" id="13_wyr6k"]
[ext_resource type="Resource" uid="uid://daafua33ayfns" path="res://Resources/AspectTemplates/Farsight.tres" id="13_yq0a3"]
[ext_resource type="Resource" uid="uid://bpfpm5krqyt7q" path="res://Resources/AspectTemplates/Brutalize.tres" id="14_wyr6k"]

[node name="Run" type="Node2D"]

[node name="WaveDirector" type="Node2D" parent="."]
script = ExtResource("2_38uoo")
EnemyScene = ExtResource("2_0j08j")
MapEnemiesPath = NodePath("../Map/Enemies")
Path2DPath = NodePath("../Map/Path2D")
SpawnEvery = 0.02

[node name="Map" parent="." instance=ExtResource("1_wyxvx")]

[node name="Path2D" parent="Map" index="0"]
position = Vector2(0, 0)

[node name="Line2D" type="Line2D" parent="Map/Path2D" index="0"]
points = PackedVector2Array(-263, -242)
default_color = Color(0.870353, 0.000283033, 0.000153441, 1)

[node name="Node" type="Node" parent="Map/Path2D/Line2D"]
script = ExtResource("4_ixfg1")
Path2DPath = NodePath("../..")
Line2DPath = NodePath("..")

[node name="Towers" parent="Map" index="1"]
position = Vector2(572, 135)

[node name="Tower" parent="Map/Towers" index="0" instance=ExtResource("4_jbeyo")]
position = Vector2(-428, 205)
BaseProjectileSpeed = 500.0

[node name="TargetingComponent" parent="Map/Towers/Tower" index="0"]
EnemiesRootPath = NodePath("../../../Enemies")

[node name="ShooterComponent" parent="Map/Towers/Tower" index="1"]
ProjectileScene = ExtResource("5_ixfg1")

[node name="Sprite2D" parent="Map/Towers/Tower" index="2"]
position = Vector2(1.99994, -6.00003)

[node name="TowerControl" type="CanvasLayer" parent="Map/Towers/Tower"]
layer = 2

[node name="TowerSlots" parent="Map/Towers/Tower/TowerControl" instance=ExtResource("7_atavw")]
offset_left = 88.0
offset_top = 197.0
offset_right = -884.0
offset_bottom = -391.0
mouse_filter = 1
TowerPath = NodePath("../..")
GameManagerPath = NodePath("../../../../../GameManager")

[node name="Slot3" parent="Map/Towers/Tower/TowerControl/TowerSlots/Slots" index="0"]
mouse_filter = 1
mouse_default_cursor_shape = 7
script = ExtResource("13_wyr6k")

[node name="Slot2" parent="Map/Towers/Tower/TowerControl/TowerSlots/Slots" index="1"]
mouse_filter = 1
script = ExtResource("13_wyr6k")

[node name="Slot1" parent="Map/Towers/Tower/TowerControl/TowerSlots/Slots" index="2"]
mouse_filter = 1
script = ExtResource("13_wyr6k")

[node name="Tower2" parent="Map/Towers" index="1" instance=ExtResource("4_jbeyo")]
position = Vector2(16, 93)
BaseProjectileSpeed = 500.0

[node name="TargetingComponent" parent="Map/Towers/Tower2" index="0"]
EnemiesRootPath = NodePath("../../../Enemies")

[node name="ShooterComponent" parent="Map/Towers/Tower2" index="1"]
ProjectileScene = ExtResource("5_ixfg1")

[node name="Sprite2D" parent="Map/Towers/Tower2" index="2"]
position = Vector2(1.99994, -6.00003)

[node name="TowerControl" type="CanvasLayer" parent="Map/Towers/Tower2"]
layer = 2

[node name="TowerSlots" parent="Map/Towers/Tower2/TowerControl" instance=ExtResource("7_atavw")]
offset_left = 532.0
offset_top = 85.0
offset_right = -440.0
offset_bottom = -503.0
mouse_filter = 1
TowerPath = NodePath("../..")
GameManagerPath = NodePath("../../../../../GameManager")

[node name="Slot3" parent="Map/Towers/Tower2/TowerControl/TowerSlots/Slots" index="0"]
mouse_filter = 1
mouse_default_cursor_shape = 7
script = ExtResource("13_wyr6k")

[node name="Slot2" parent="Map/Towers/Tower2/TowerControl/TowerSlots/Slots" index="1"]
mouse_filter = 1
script = ExtResource("13_wyr6k")

[node name="Slot1" parent="Map/Towers/Tower2/TowerControl/TowerSlots/Slots" index="2"]
mouse_filter = 1
script = ExtResource("13_wyr6k")

[node name="AspectLib" type="Node" parent="."]
script = ExtResource("10_j6cy0")
AspectTemplates = Array[Resource]([ExtResource("11_7jyn4"), ExtResource("12_81a2t"), ExtResource("12_5bwvv"), ExtResource("13_yq0a3"), ExtResource("14_wyr6k")])

[node name="GameManager" type="Node" parent="."]
script = ExtResource("7_xu74l")
WaveDirectorPath = NodePath("../WaveDirector")
EnemiesRoot = NodePath("../Map/Enemies")
gameOverTextPath = NodePath("../CanvasLayer/GameOverText")

[node name="PlayerManager" type="Node" parent="."]
script = ExtResource("9_x3f4s")
GameManagerPath = NodePath("../GameManager")
EnemiesRootPath = NodePath("../Map/Enemies")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="AspectBar" parent="CanvasLayer" instance=ExtResource("9_kl2rs")]
RowPath = NodePath("Margin/Scroll/Row")

[node name="HealthUI" type="Label" parent="CanvasLayer"]
offset_left = 3.0
offset_top = 4.0
offset_right = 103.0
offset_bottom = 27.0
text = "HP: 100 / 100"
script = ExtResource("11_x3f4s")
PlayerManagerPath = NodePath("../../PlayerManager")

[node name="GameOverText" type="Label" parent="CanvasLayer"]
visible = false
offset_left = 534.0
offset_top = 282.0
offset_right = 626.0
offset_bottom = 305.0
text = "GAME OVER"

[editable path="Map"]
[editable path="Map/Towers/Tower"]
[editable path="Map/Towers/Tower/TowerControl/TowerSlots"]
[editable path="Map/Towers/Tower2"]
[editable path="Map/Towers/Tower2/TowerControl/TowerSlots"]
[editable path="CanvasLayer/AspectBar"]
